var N=Object.defineProperty;var v=(l,r,e)=>r in l?N(l,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[r]=e;var s=(l,r,e)=>(v(l,typeof r!="symbol"?r+"":r,e),e);import{j as p,c as m,a as k}from"./index-a1e85e29.js";import{R as O}from"./index-0cbcd92a.js";import{R as B}from"./index-314a82e0.js";import{g as q}from"./_commonjsHelpers-de833af9.js";import{t as E}from"./toString-a79d3543.js";import{i as f}from"./hook-0eff1646.js";import{I as D}from"./IconButton-5d21255e.js";var V=E,I=0;function R(l){var r=++I;return V(l)+r}var x=R;const $=q(x),P=['[contentEditable=true]:not([tabindex="-1"])','[tabindex]:not([tabindex="-1"])','a[href]:not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])',"dialog",'embed:not([tabindex="-1"])','iframe:not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','map[name] area[href]:not([tabindex="-1"])','object:not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','summary:not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])'],C=l=>l.querySelectorAll(P.join(",")),y=O.forwardRef(({modal:l,children:r,...e},t)=>p("div",{ref:t,...e,role:"dialog","aria-modal":l?"true":"false",children:r}));try{y.displayName="BaseDialog",y.__docgenInfo={description:"",displayName:"BaseDialog",props:{modal:{defaultValue:null,description:"",name:"modal",required:!1,type:{name:"boolean"}}}}}catch{}const o=class o extends O.PureComponent{constructor(e){super(e);s(this,"baseName");s(this,"id");s(this,"titleId");s(this,"portalNode");s(this,"dialog",null);s(this,"header",null);s(this,"content",null);s(this,"footer",null);s(this,"stickyObserver",null);s(this,"bodyStyle",null);s(this,"open",()=>{this.setState({isOpen:!0,trigger:document.activeElement})});s(this,"close",()=>{this.setState({isOpen:!1})});s(this,"requestClose",()=>{const{onRequestClose:e}=this.props;e&&e()});s(this,"updateLength",()=>{if(this.dialog){const e=this.dialog.offsetHeight>window.innerHeight-80;this.setState({long:e,stuckFooter:e})}});s(this,"onPointerDownClick",()=>{this.setState({isClickingDialog:!0})});s(this,"onPointerUpClick",e=>{var n;const{isClickingDialog:t}=this.state;!((n=this.dialog)!=null&&n.contains(e.target))&&!t&&this.setState({isClickingDialog:!1})});s(this,"onBackdropClick",({nativeEvent:e})=>{const{closeOnBackdropClick:t}=this.props,{isClickingDialog:n}=this.state;t&&this.dialog&&!e.composedPath().includes(this.dialog)&&!n&&this.requestClose(),this.setState({isClickingDialog:!1})});s(this,"onDocumentKeydown",e=>{var a;const{closeOnEscape:t}=this.props,{isOpen:n}=this.state;if(n&&(e.key==="Escape"&&t&&this.requestClose(),e.key==="Tab"&&((a=this.dialog)!=null&&a.contains(document.activeElement)||!document.activeElement))){const i=this.dialog?C(this.dialog):[];if(i.length){let d;const c=Array.from(i).indexOf(document.activeElement),h=c===i.length-1&&!e.shiftKey,u=c===0&&e.shiftKey;(c<0||h)&&(d=i[0]),u&&(d=i[i.length-1]),d&&(e.preventDefault(),d.focus())}else e.preventDefault()}});this.baseName=e.baseName||o.bemBase,this.id=e.id||$(`${this.baseName}-`),this.titleId=`${this.id}-${o.bemElements.title}`,this.portalNode=f?this.createPortalNode():null,this.state={isOpen:e.isOpen||o.defaultProps.isOpen,trigger:null,long:!1,stuckHeader:!1,stuckFooter:!1,isClickingDialog:!1}}componentDidMount(){if(!f||!this.portalNode)return;if(this.bodyStyle=document.body.style.cssText,"IntersectionObserver"in window&&(this.stickyObserver=new IntersectionObserver(([t])=>{t.target===this.header&&this.setState({stuckHeader:t.intersectionRatio<1}),t.target===this.footer&&this.setState({stuckFooter:t.intersectionRatio<1})},{threshold:[1]})),!document.contains(this.portalNode)){const{mountPoint:t=o.defaultProps.mountPoint}=this.props;t().appendChild(this.portalNode)}const{isOpen:e}=this.state;e&&this.onOpen()}getSnapshotBeforeUpdate({mountPoint:e=o.defaultProps.mountPoint}){const{mountPoint:t=o.defaultProps.mountPoint}=this.props;return{prevMount:e(),nextMount:t()}}componentDidUpdate(e,t,{prevMount:n,nextMount:a}){if(!f||!this.portalNode)return;const{isOpen:i,children:d,focusOnOpen:c,portalClass:h=`${this.baseName}__${o.bemElements.portal}`}=this.props,{isOpen:u}=this.state;e.portalClass!==h&&(this.portalNode.className=h),a!==n&&(n.removeChild(this.portalNode),a.appendChild(this.portalNode)),!e.isOpen&&i?this.open():e.isOpen&&!i&&this.close(),!t.isOpen&&u?this.onOpen():t.isOpen&&!u&&this.onClose(),e.children!==d&&this.updateLength(),u&&!e.focusOnOpen&&c&&c.focus()}componentWillUnmount(){!f||!this.portalNode||(this.portalNode.remove(),document.removeEventListener("keydown",this.onDocumentKeydown),this.bodyStyle?document.body.setAttribute("style",this.bodyStyle):document.body.removeAttribute("style"))}onOpen(){const{focusOnOpen:e}=this.props;let t=e||null;if(!t){const a=this.dialog?C(this.dialog):[];t=a.length?a[0]:null}t||(t=this.header||this.content,t&&t.setAttribute("tabIndex","-1")),t&&t.focus(),this.updateLength(),this.stickyObserver&&(this.header&&this.stickyObserver.observe(this.header),this.footer&&this.stickyObserver.observe(this.footer)),document.addEventListener("keydown",this.onDocumentKeydown);const n=Math.abs(window.innerWidth-document.documentElement.clientWidth);document.body.style.overflow="hidden",document.body.style.paddingRight=`${n}px`,document.addEventListener("pointerup",this.onPointerUpClick)}onClose(){const{trigger:e}=this.state;this.stickyObserver&&(this.header&&this.stickyObserver.unobserve(this.header),this.footer&&this.stickyObserver.unobserve(this.footer)),document.removeEventListener("keydown",this.onDocumentKeydown),e&&e.focus(),this.bodyStyle?document.body.setAttribute("style",this.bodyStyle):document.body.removeAttribute("style")}get CloseButton(){const{hideCloseButton:e,closeButtonClass:t=`${this.baseName}__${o.bemElements.closeButton}`}=this.props;return e?null:p(D,{icon:"close",className:m(t,"button--base"),onClick:this.requestClose,children:"Close"})}get Title(){const{titleClass:e=`${this.baseName}__${o.bemElements.title}`,title:t,hideTitle:n}=this.props;return n?null:p("h2",{className:e,id:this.titleId,children:t})}get Header(){const{headerClass:e=`${this.baseName}__${o.bemElements.header}`,stickyHeader:t}=this.props;if(!this.Title&&!this.CloseButton)return null;const{stuckHeader:n,long:a}=this.state,i=m(e,{[`${e}--sticky`]:t&&a,"nds-stuck":t&&n});return k("header",{className:i,ref:d=>{this.header=d},children:[this.Title,this.CloseButton]})}get ActionBar(){const{actionBarClass:e=`${this.baseName}__${o.bemElements.actionBar}`,stickyActionBar:t,actions:n}=this.props;if(!n)return null;const{stuckFooter:a,long:i}=this.state,d=m(e,{[`${e}--sticky`]:t&&i,"nds-stuck":t&&a});return p("footer",{className:d,ref:c=>{this.footer=c},children:n})}get Dialog(){const{title:e,hideTitle:t,className:n,children:a,contentClass:i=`${this.baseName}__${o.bemElements.content}`,backdropClass:d=`${this.baseName}__${o.bemElements.backdrop}`}=this.props,{isOpen:c,long:h}=this.state;if(!c)return null;const u=m(this.baseName,n),w=t?{"aria-label":e}:{"aria-labelledby":this.titleId};return p("section",{className:m(d,{[`${this.baseName}--long`]:h}),onClick:this.onBackdropClick,children:k(y,{modal:!0,id:this.id,className:u,ref:g=>{this.dialog=g},onPointerDown:this.onPointerDownClick,...w,children:[this.Header,p("section",{className:i,ref:g=>{this.content=g},children:a}),this.ActionBar]})})}createPortalNode(){const{portalClass:e=`${this.baseName}__${o.bemElements.portal}`}=this.props,t=document.createElement("div");return t.className=e,t}render(){return!f||!this.portalNode?null:B.createPortal(this.Dialog,this.portalNode)}};s(o,"bemBase","nds-modal"),s(o,"bemElements",{portal:"portal",backdrop:"backdrop",header:"header",title:"title",closeButton:"close",content:"content",actionBar:"actionbar"}),s(o,"defaultProps",{isOpen:!1,mountPoint:()=>document.body,hideTitle:!1,closeOnBackdropClick:!0,closeOnEscape:!0});let b=o;try{b.displayName="Modal",b.__docgenInfo={description:"Modal dialog.",displayName:"Modal",props:{isOpen:{defaultValue:{value:"false"},description:"Indicates whether the Modal dialog is open.",name:"isOpen",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"The name of the Modal dialog. Required for accessibility but can be\nvisually hidden with the `hideTitle` prop.",name:"title",required:!0,type:{name:"string"}},hideTitle:{defaultValue:{value:"false"},description:`Indicates that the title should be visually hidden. It will still be
accessible to screen reader users.`,name:"hideTitle",required:!1,type:{name:"boolean"}},hideCloseButton:{defaultValue:null,description:`Indicates that the built-in close button in the top right should not be
rendered.`,name:"hideCloseButton",required:!1,type:{name:"boolean"}},actions:{defaultValue:null,description:`A list of actions or React Fragment that will be set inside an action bar
at the bottom of the Modal dialog.`,name:"actions",required:!1,type:{name:"ReactFragment | ReactElement<ButtonProps, string | JSXElementConstructor<any>>[]"}},stickyHeader:{defaultValue:null,description:`Indicates whether the header should stick to the top of the screen. Only
has an effect when the modal's content is longer than the window height
and the user scrolls enough to move the header above to top of the screen.`,name:"stickyHeader",required:!1,type:{name:"boolean"}},stickyActionBar:{defaultValue:null,description:`Indicates whether the footer should stick to the bottom of the screen.
Only has an effect when the modal's content is longer than the window
height and the footer is below the bottom of the screen.`,name:"stickyActionBar",required:!1,type:{name:"boolean"}},focusOnOpen:{defaultValue:null,description:`An element that should be focused on open. If none is specified, the first
focusable element in the Modal will be focused. If none can be found, the
header or content will be focused.`,name:"focusOnOpen",required:!1,type:{name:"HTMLElement"}},closeOnBackdropClick:{defaultValue:{value:"true"},description:"Indicates whether clicking the backdrop should close the Modal dialog.",name:"closeOnBackdropClick",required:!1,type:{name:"boolean"}},closeOnEscape:{defaultValue:{value:"true"},description:"Indicates whether `Escape` should close the Modal dialog.",name:"closeOnEscape",required:!1,type:{name:"boolean"}},mountPoint:{defaultValue:{value:"(): HTMLElement => document.body"},description:"A function that returns an element where the Modal dialog should be\nattached to the DOM. Default is the `body`.",name:"mountPoint",required:!1,type:{name:"(() => HTMLElement)"}},baseName:{defaultValue:null,description:"",name:"baseName",required:!1,type:{name:"string"}},backdropClass:{defaultValue:null,description:"",name:"backdropClass",required:!1,type:{name:"string"}},headerClass:{defaultValue:null,description:"",name:"headerClass",required:!1,type:{name:"string"}},titleClass:{defaultValue:null,description:"",name:"titleClass",required:!1,type:{name:"string"}},closeButtonClass:{defaultValue:null,description:"",name:"closeButtonClass",required:!1,type:{name:"string"}},contentClass:{defaultValue:null,description:"",name:"contentClass",required:!1,type:{name:"string"}},actionBarClass:{defaultValue:null,description:"",name:"actionBarClass",required:!1,type:{name:"string"}},portalClass:{defaultValue:null,description:"",name:"portalClass",required:!1,type:{name:"string"}},onRequestClose:{defaultValue:null,description:"Callback function that is called when the Modal would like to close. This\nwill happen under the following conditions:\n* if `closeOnBackdropClick` is `true` and the user clicks the backdrop.\n* if `closeOnEscape` is `true` and the user presses `Escape`.\n* if `hideCloseButton` is not `true` and the user clicks the close button.\n\nTo close the Modal when `onRequestClose` triggers, simply update the\n`isOpen` prop to `false`.",name:"onRequestClose",required:!1,type:{name:"(() => void)"}},onOpen:{defaultValue:null,description:"",name:"onOpen",required:!1,type:{name:"(() => void)"}},headerRef:{defaultValue:null,description:"",name:"headerRef",required:!1,type:{name:"Ref<HTMLElement>"}},contentRef:{defaultValue:null,description:"",name:"contentRef",required:!1,type:{name:"Ref<HTMLElement>"}},actionBarRef:{defaultValue:null,description:"",name:"actionBarRef",required:!1,type:{name:"Ref<HTMLElement>"}},modal:{defaultValue:null,description:"",name:"modal",required:!1,type:{name:"boolean"}}}}}catch{}export{b as M};
//# sourceMappingURL=Modal-279d1dd7.js.map
