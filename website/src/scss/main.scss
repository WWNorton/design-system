@use 'sass:meta';
@use './nds';
@use './navbar';

@include nds.complete;

// Proxima Nova
@import url('https://use.typekit.net/vjr7yrz.css');

// Bind NDS color schemes to the Infima colors
:root {
	--ifm-color-emphasis-0: var(--nds-white);
	--ifm-color-emphasis-100: var(--nds-base-color-10);
	--ifm-color-emphasis-200: var(--nds-base-color-20);
	--ifm-color-emphasis-300: var(--nds-base-color-30);
	--ifm-color-emphasis-400: var(--nds-base-color-40);
	--ifm-color-emphasis-500: var(--nds-base-color-50);
	--ifm-color-emphasis-600: var(--nds-base-color-60);
	--ifm-color-emphasis-700: var(--nds-base-color-70);
	--ifm-color-emphasis-800: var(--nds-base-color-80);
	--ifm-color-emphasis-900: var(--nds-base-color-90);
	--ifm-color-primary: var(--nds-primary-color);
	--ifm-color-secondary: var(--nds-base-color-20);
	--ifm-color-info: var(--nds-blue-60);
	--ifm-color-success: var(--nds-success-color);
	--ifm-color-warning: var(--nds-warning-color-lighter);
	--ifm-color-danger: var(--nds-error-color);
	--ifm-color-content: var(--nds-text-color);
	--ifm-color-content-inverse: var(--nds-text-color-inverse);
	--ifm-background-color: var(--nds-background-color);
	--ifm-font-family-base: var(--nds-font-family-sans);
	--ifm-menu-color-active: var(--nds-primary-color-dark);

	&[data-theme='dark'] {
		--ifm-background-color: var(--nds-background-color);
		--ifm-color-info: var(--nds-blue-50);
		--ifm-color-emphasis-100: var(--nds-base-color-10);
		--ifm-color-emphasis-200: var(--nds-base-color-20);
		--ifm-color-emphasis-300: var(--nds-base-color-30);
		--ifm-color-emphasis-400: var(--nds-base-color-40);
		--ifm-color-emphasis-500: var(--nds-base-color-50);
		--ifm-color-emphasis-600: var(--nds-base-color-60);
		--ifm-color-emphasis-700: var(--nds-base-color-70);
		--ifm-color-emphasis-800: var(--nds-base-color-80);
		--ifm-color-emphasis-900: var(--nds-base-color-90);
		--ifm-navbar-background-color: var(--nds-gray-100);
	}
}

blockquote {
	--ifm-blockquote-color: var(--ifm-color-emphasis-600);

	[data-theme='dark'] & {
		--ifm-blockquote-color: var(--ifm-color-emphasis-500);
	}
}

code {
	border-radius: var(--nds-radius-sm);
}

.no-break {
	white-space: pre;
}

.anchor[aria-hidden='true']:focus {
	box-shadow: none;
}

.alert--secondary {
	--ifm-alert-color: var(--ifm-font-color-base);
	--ra-admonition-icon-color: var(--ifm-font-color-base);
	--ifm-code-background: var(--ifm-color-emphasis-300);
}

.alert--info {
	--ifm-alert-background-color: var(--ifm-color-info);
	--ifm-alert-border-color: var(--ifm-color-info);
}

.alert--warning {
	--ifm-alert-color: var(--ifm-font-color-base);
	--ra-admonition-icon-color: --ifm-alert-color;

	[data-theme='dark'] & {
		--ifm-alert-color: var(--ifm-font-color-base-inverse);
	}
}

.table-of-contents__link {
	--nds-link-decoration: none;
}

.footer--dark {
	--ifm-footer-background-color: var(--nds-navy-90);
	--ifm-footer-color: var(--nds-white);
	--ifm-footer-link-color: var(--nds-teal-40);
	--ifm-footer-link-hover-color: var(--nds-teal-50);
}

.families-outer {
	display: flex;
}

.families {
	display: flex;
	margin: auto;
	overflow-x: auto;
}

.family + .family {
	margin-left: 1rem;
}

.swatch {
	display: flex;
	min-width: 11rem;
	padding: 0.75rem 1rem;
	justify-content: space-between;

	&:hover * {
		color: inherit !important;
	}

	.a11y {
		text-align: right;
	}
}

.swatch__name {
	font-weight: var(--nds-font-weight-bold);
}

.nds-dropdown__option {
	margin-top: 0 !important;
}

// TODO: support utilities like these in the design system
@mixin create-utility($items, $prefix, $property, $important: true) {
	@each $item in $items {
		$name: '';
		$value: '';

		@if meta.type-of($item) == 'string' {
			$name: $item;
			$value: var(--nds-#{$property}-#{$item});
		}

		@if meta.type-of($item) == 'list' {
			$name: list.nth($item, 1);
			$value: list.nth($item, 2);
		}

		@if meta.type-of($item) == 'map' {
			$name: map.get($item, 'name');
			$value: map.get($item, 'value');
		}

		.#{$prefix}-#{$name} {
			#{$property}: $value if($important, !important, '');
		}
	}
}

@include create-utility((
	'system-sans', 'system-serif', 'system-mono',
	'sans', 'serif', 'mono', 'base', 'headings',
), 'ff', 'font-family');

// font-size
@include create-utility((
	'10', '12', '14', '16', '18', '20', '24', '32', '40', '48',
	'base', 'xs', 'sm', 'md', 'lg',
	'h1', 'h2', 'h3', 'h4', 'h5', 'h6',
), 'fs', 'font-size');

@each $size in ('xs', 'sm', 'md', 'lg', 'base') {
	.body-#{$size} {
		@include nds.typeset(
			$size: var(--nds-font-size-#{$size}),
		);
	}

	.ui-#{$size} {
		@include nds.typeset(
			$size: var(--nds-font-size-#{$size}),
			$height: var(--nds-line-height-3),
		);
	}
}

@for $l from 1 through 6 {
	.h#{$l} {
		@include nds.typeset-heading(
			$size: var(--nds-font-size-h#{$l}),
			$height: lh('h#{$l}'),
		);
	}
}

// GitLab's Markdown color chip CSS
.color-chip {
	display: inline-block;
	width: 0.9em;
	height: 0.9em;
	margin: 0 4px 2px 0;
	margin-top: 0;
	line-height: 1;
	vertical-align: middle;
	background: #fff;
	background-image: none;
	background-image:
		linear-gradient(135deg, #e1e1e1 25%, transparent 0%, transparent 75%, #e1e1e1 0%),
		linear-gradient(135deg, #e1e1e1 25%, transparent 0%, transparent 75%, #e1e1e1 0%);
	background-position: 0 0, 0.5em 0.5em;
	background-position-x: 0%;
	background-position-y: 0%;
	background-size: auto;
	background-size: 1em 1em;
	border-radius: 3px;

	> span {
		display: inline-block;
		width: 100%;
		height: 100%;
		margin-bottom: 2px;
		border: 1px solid rgba(0, 0, 0, 0.3);
		border-radius: 3px;
	}
}

.example-shade {
	@include nds.set(
		$nds-primary-color: nds.family('primary-color', 'purple', 70),
	);
}
